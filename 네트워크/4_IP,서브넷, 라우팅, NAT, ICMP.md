# IP주소란 ? : 인터넷에 연결된 기기를 식별하는 값

> IP주소를 이용해 데이터의 출발지와 목적지를 나타냅니다.

모든 종류의 네트워크 디바이스에는 IP 주소가 부여됩니다. IP 주소는 인터넷의 기본 구성요소입니다. 연결된 디바이스 사이에서 정확하게 효율적으로 데이터를 전송하려면 IP 주소가 반드시 필요합니다.

IP 패킷에는 소스 및 대상의 IP 주소가 포함됩니다.

우편번호가 특정 장소를 가리키듯이, IP 주소는 인터넷에 연결된 특정 기기를 가리킵니다. 컴퓨터, 스마트폰 등은 인터넷으로 서로 통신하고 데이터를 교환하는데 우편번호가 있어야 편지를 전달하듯이, IP 주소가 있어야 기계가 서로 통신할 수 있습니다. 한 마디로 요약하자면 **`IP 주소는 인터넷 통신을 가능하게 하는 국제 표준 규약`입니다.** 어디든, 언제든 인터넷 연결만으로 다른 기계와 통신할 수 있는 이유입니다.

IP 주소도 비슷하게 작동합니다. 각 주소는 왼쪽과 오른쪽으로 나뉩니다. 왼쪽은 우편번호와 유사합니다. 예를 들어 IP 주소 128.30._._ 및 128.31.*.*는 [매사추세츠 공과대학(MIT)에](http://www.mit.edu/)속합니다. 라우터는 우체국에서 우편번호를 사용하듯이 로컬 라우터에 대상을 지시하기 위해 접두사 또는 CIDR(Classless Inter-Domain Routing)이라고 하는 왼쪽 범위를 사용합니다. 로컬 라우터에서 전체 IP 주소가 사용되면 IP 주소의 오른쪽은 네트워크에서 노트북 또는 휴대폰과 같은 특정 디바이스를 가리킵니다.

[IP(인터넷 프로토콜) 주소란 무엇일까요? | Akamai](https://www.akamai.com/ko/glossary/what-is-an-ip-address)

[IP 주소 | 토스페이먼츠 개발자센터](https://docs.tosspayments.com/resources/glossary/ip)

# IPV4와 IPV6

인터넷에는 두 가지 버전의 IP(인터넷 프로토콜), 즉 IPv4 및 IPv6이 사용됩니다.

**IPv6:** 최신 버전으로, 2023년 7월 현재 IPv6 주소는 [웹 사이트의 21.6%](https://w3techs.com/technologies/details/ce-ipv6)정도에서 사용되고 있습니다.

**IPv4:** 최대 43억 개의 IP 주소로 IP 주소 할당 공간이 제한되지만, 최신 버전인 Ipv6은 규모가 더 확장되어 수조 개의 IP 주소를 수용할 수 있습니다. 이러한 확장은 새로운 종류의 인터넷 연결 디바이스를 확장하고 수용하는 데 반드시 필요했습니다.

모든 종류의 네트워크 디바이스에는 IP 주소가 부여됩니다. IP 주소는 인터넷의 기본 구성요소입니다. 연결된 디바이스 사이에서 정확하게 효율적으로 데이터를 전송하려면 IP 주소가 반드시 필요합니다.

IP 주소는 IANA(Internet Assigned Numbers Authority)에서 할당합니다. IP 주소의 전체 범위는 0.0.0.0에서 255.255.255.255까지입니다.

**IPv4**

IPv4는 32bit의 숫자이며, 4개의 8bit 숫자 그룹(옥텟)이 점으로 나누어진 `172.16.254.1`와 같은 형태에요. 보통 하나의 옥텟은 3자리 숫자로 구성되어 있고, 000부터 255까지 올 수 있어요. 첫 번째 옥텟부터 세 번째 옥텟은 공통적인 네트워크 주소이고, 마지막 옥텟은 기계를 식별하는 고유 호스트 주소에요.

!https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/IPv4_address_structure_and_writing_systems-en.svg/600px-IPv4_address_structure_and_writing_systems-en.svg.png

**IPv6**

IPv6는 128bit의 숫자이며, 8개의 16bit 숫자 그룹이 콜론으로 나누어진 `2001:0DB8:AC10:FE01:0000:0000:0000:0000`와 같은 형태에요. 0으로만 구성되어 있는 마지막 4그룹은 생략해도 돼요. IPv6는 발행 가능한 주소의 수를 늘리면서 보안과 효율 기능도 개선했어요. 프라이버시 보호 기능으로 더 안전한 통신을 지원해요. 라우팅 헤더 및 패킷 헤더 단순화, Network Address Translation(NAT) 과정을 없애면서 더 빠르게 통신해요. 첫 번째 그룹부터 세 번째 그룹은 사이트 접두어(Routing Prefix)이고, 네 번째 그룹은 서브넷 ID입니다. 나머지 그룹은 인터페이스 ID에요.

# 서브넷과 서브넷 마스크

서브넷은 말그대로 `부분망`이라는 뜻입니다. IP 주소에서 네트워크 영역을 부분적으로 나눈 부분망, 부분 네트워크를 뜻하죠. **그리고 이 서브넷을 만들 때 쓰이는 것이 바로 서브넷 마스크입니다.**

## 서브넷

이 서브넷 마스크를 이용하여 IP주소 체계의 `Network ID`와 `Host ID`를 서브넷 마스크를 통해 분리할 수 있습니다. IP주소 공간을 더 작은 네트워크로 분할하는 기술. IP주소 공간을 서브넷으로 분할하면 네트워크를 더 효율적으로 관리하고, 더 많은 호스트들을 지원하거나 보안을 강화할 수 있습니다.

## 서브넷 마스크 : IP주소 체계의 네트워크 ID와 Host ID를 분리하는 역할

메인이 아닌 어떤 가공을 통한 네트워크를 만들기 위해서 씌우는 마스크라고 생각하면 됩니다. 주어진 IP주소를 네트워크 환경에 맞게 나누어 주기 위해서 씌워주는 이진수의 조합입니다.

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/5a26ec9a-4a75-431e-ae2d-b908cda9c589/83d15073-c19c-41df-853c-1d46894276a5/image.png)

### 서브넷 마스크를 사용하는 이유

하나의 네트워크 안에는 클래스에 따라 수 만개 이상의 호스트가 가지게 되는데, 단일 네트워크의 크기가 너무 큰 경우 특정 기기와의 통신을 시도할 때  브로드캐스트의 영향이 너무 크기 때문에 서브넷 마스크를 사용해 네트워크를 쪼개어 브로드 캐스트 영역을 보다 작은 네트워크(서브넷)으로 나눌 수 있습니다. 이를 통해 작은 그룹으로 네트워크를 조직화하고 관리할 수 있습니다.

[서브넷, 서브넷 마스크 확실하게 짚고 넘어가자](https://engkimbs.tistory.com/entry/서브넷-서브넷-마스크-확실하게-짚고-넘어가자)

# 라우팅이란 ?

# 라우팅 프로토콜

라우터가 패킷을 전달할 때 가장 기본적으로 참조하는 프로토콜이며, 이 프로토콜이 설정되어 있지 않으면 라우터는 자신과 직접 연결되어 있는 네트워크가 아닌 다른 네트워크로 패킷을 전달하지 못한다. 라우팅 프로토콜은 한 가지만 존재하는 것이 아니라 여러 가지가 존재하며, 어떠한 라우팅 프로토콜을 사용하느냐에 따라 라우터가 패킷을 보내는 경로가 틀려질 수 있다.

## 정적 라우팅(Static Routing)

> 정적 라우팅은 라우터에 라우팅 테이블 구성을 자동이 아닌 수동으로 설정하는 방식이다. 모든 네트워크에 대한 경로 설정을 수동으로 해야 하는 단점이 있지만, 라우터의 자원을 가장 적게 사용하는 라우팅 방식이기도 하며, 대규모 네트워크에서 사용하기에 적합하지 않다.

## 동적 라우팅(Dynamic Routing)

> 동적 라우팅은 라우터에 라우팅 테이블 구성을 수동이 아닌 자동으로 설정하는 방식으로, 우회 경로를 자동으로 찾기 때문에 네트워크에서 중요한 요소인 가용성을 높여주는 프로토콜이다. 그러나 정적 라우팅보다 라우터의 자원을 많이 사용한다는 단점이 있다.

# Public IP와 Private IP 차이

IP주소는 이용 범위에 따라, 공인 IP 주소와 사설 IP주소2가지로 분류된다.

## 1. 공인 IP (Public IP)

인터넷 사용자의 로컬 네트워크를 식별하기 위해 **ISP(인터넷 서비스 공급자)가 제공하는 IP 주소**이다. 공용 IP 주소라고도 불리며 외부에 공개되어 있는 IP 주소이다.

- 공인 IP는 전세계에서 유일한 IP 주소를 갖는다.
- 공인 IP 주소가 외부에 공개되어 있기에 인터넷에 연결된 다른 PC로부터의 접근이 가능하다. 따라서 공인 IP 주소를 사용하는 경우에는 방화벽 등의 보안 프로그램을 설치할 필요가 있다.
- 인터넷에 계약하면 공인 주소가 할당된다.

[ 키워드 : 전세계유일, ISP, 외부 공개 ]

## 2. 사설 IP (Private IP)

사설 주소를 이용하느 사설 네트워크에서 인터넷으로 통신할 때는 사설 주소 그대로는 통신할 수 없다. NAT가 필요하다. 서버에서 응답을 돌려 보낼 떄는 목적지가 사설 네트워크이고 출발지는 공인 네트워크. 하지만 응답은 돌아오지 않는다. 인터넷에서는 목적지가 사설 주소로 된 IP패킷은 반드시 폐기된다.

**일반 가정이나 회사 내 등에 할당된 네트워크**의 IP 주소이며, 로컬 IP, 가상 IP라고도 한다. IPv4의 주소부족으로 인해 서브넷팅된 IP이기 때문에 라우터에 의해 로컬 네트워크상의 PC 나 장치에 할당된다.

### 2.1. 사설IP 주소대역

사설IP 주소는 다음 3가지 주소대역으로 고정된다.

- Class A : **10**.0.0.0 ~ **10**.255.255.255
- Class B : **172.16**.0.0 ~ **172.31**.255.255
- Class C : **192.168**.0.0 ~ **192.168**.255.255

[ 키워드 : NAT, 로컬 & 가상IP, 서브넷팅 ]

## 3. 사설 IP와 공인 IP의 차이

|               | 공인 IP (Public IP)           | 사설 IP (Private IP)        |
| ------------- | ----------------------------- | --------------------------- |
| **할당 주체** | ISP(인터넷 서비스 공급자)     | 라우터(공유기)              |
| **할당 대상** | 개인 또는 회사의 서버(라우터) | 개인 또는 회사의 기기       |
| **고유성**    | 인터넷 상에서 유일한 주소     | 하나의 네트워크 안에서 유일 |
| **공개 여부** | 내/외부 접근 가능.            | 외부 접근 불가능            |

❗ 사설 IP 주소만으로는 인터넷에 직접 연결할 수 없다. **라우터를 통해 1개의 공인(Public) IP**만 할당하고, **라우터에 연결된 개인 PC는 사설(Private) IP**를 각각 할당 받아 인터넷에 접속할 수 있게 된다.

아래의 그림을 보면 이해가 쉽다.

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/5a26ec9a-4a75-431e-ae2d-b908cda9c589/976f4d07-6444-4b14-b02b-8071c32eddcb/image.png)

💻➡🌏 : 사설 IP를 할당받은 스마트폰 혹은 개인 PC가 데이터 패킷을 인터넷으로 전송하면, 라우터(공유기)가 해당 사설 IP를 공인 IP로 바꿔서 전송한다.

🌏➡💻 : 인터넷에서 오는 데이터 패킷의 목적지도 해당하는 사설 IP로 변경한 후 개인 스마트폰 혹은 PC에 전송한다.

# IP는 어떻게 할당될까요?

쉽게 말해 할당받은 **공인 IP 주소는 실제 컴퓨터 간의 통신에 사용하고, 공유기(라우터) 등을 이용하여 내부 사설 네트워크를 구축하는 방식으로 집에 있는 여러 기기에 사설 IP를 할당**한다

[쉽게 이해하는 네트워크 14. IP 주소의 종류와 할당 방법 및 NAT 기술](https://better-together.tistory.com/124)

[공유기는 어떻게 IP를 할당할까 - 인터넷 공유기 원리](https://m.blog.naver.com/kim04099/221917309214)

# NAT:공인IP와 사설 IP를 매핑해 주는 역할

> 네트워크 주소 변환(Network Address Translation, 줄여서 NAT)

IP 패킷의 TCP/UDP 포트 숫자와 소스 및 목적지의 IP 주소 등을 재기록하면서 라우터를 통해 네트워크 트래픽을 주고 받는 기술.

**1. NAT 너란녀석... 참 고맙다...**

우리가 인터넷에서 사용할 수 있는 IP는 한정적입니다.

만약 NAT 기능이 없었다면 전 세계인구가 인터넷을 하려한다면 우리는 **엄청난 비용을 지불하고 인터넷을 사용**해야 했을 것입니다. 하지만 NAT가 있기에 우리는 그나마 IP에 제한을 받지 않고 인터넷을 사용할 수 있게 된 것이죠!

**2. 1:1 NAT**

**먼저 1:1 NAT입니다 1:1은 사설IP 1개당 공인IP 1개로 매칭시켜서 NAT를 시켜주는 것입니다.**

NATNAT(Network Address Translation)는주소가 고갈된 IPv4를 위해 태어난 기술로,사설 IP 주소와 공인 IP 주소 간에 주소 변환을 해 사설 네트워크에서 인터넷으로 통신이 가능하게 합니다. 한마디로NAT는 주소 변환 기술이고 주로 라우터에 의해 구현됩니다. 집이나 사무실에서 사용하는 가정용 라우터인 인터넷 공유기에도 NAT 기술이 적용되어 있습니다.사설 IP 주소가 설정된 컴퓨터가 인터넷과 통신하고 싶은 경우에는 간단히 NAT 기술이 구현된 라우터를 연결하여 통신을 하면 되는 것입니다. 이때 라우터는 사설 네트워크에서 인터넷으로 들어가는 일종의 게이트웨이(gateway, 출입구) 역할을 합니다. 기본 게이트웨이*(default gateway라는 의미에서 보통 라우터에는 호스트부가 1인 IP 주소를 할당합니다.*. 기본 게이트웨이는 호스트의 패킷이 외부 네트워크로 나갈 때나 외부 내트워크의 패킷이 호스트가 속한 네트워크로 들어올 때 꼭 거쳐야 하는 출입구입니다.

### 목적

첫째, 인터넷의 공인 IP주소를 절약할 수 있다는 점

둘째, 인터넷이란 공공망과 연결되는 사용자들의 고유한 사설망을 침입자들로부터 보호할 수 있다는 점

1. 인터넷의 공인 IP주소는 한정되어 있기 때문에 가급적 이를 공유할 수 있도록 하는 것이 필요한데 NAT를 이용하면 사설 IP주소를 사용하면서 이를 공인 IP주소와 상호변환할 수 있도록 하여, 공인 IP주소를 다수가 함께 사용할 수 있도록 함으로써 이를 절약할 수 있는 것입니다.

2. 공개된 인터넷과 사설망 사이에 방화벽(Firewall)을 설치하여 외부 공격으로부터 사용자의 통신망을 보호하는 기본적인 수단으로 활용할 수 있습니다. 이때 외부 통신망 즉 인터넷망과 연결하는 장비인 라우터에 NAT를 설정할 경우 라우터는 자신에게 할당된 공인 IP주소만 외부로 알려지게 하고, 내부에서는 사설 IP주소만 사용하도록 하여 필요시에 이를 서로 변환시켜 줍니다. 따라서 외부 침입자가 공격하기 위해서는 사설망의 내부 사설 IP주소를 알아야 하기 때문에 공격이 불가능해지므로 내부 네트워크를 보호할 수 있게 됩니다.

[🌐 NAT(Network Address Translation) 이란 무엇인가?](https://inpa.tistory.com/entry/WEB-🌐-NAT-란-무엇인가)

[NAT(Network Address Translation)](https://run-it.tistory.com/23?category=665122)

[NAT(Network Address Translation) 통신과정 끝판왕(feat. 총정리)](https://run-it.tistory.com/24?category=665122)

# ICMP

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/5a26ec9a-4a75-431e-ae2d-b908cda9c589/e3a84f67-12df-442a-987a-2adc2126c1d4/image.png)

ICMP[Internet Control Message Protocol]

: 인터넷 제어 메시지 프로토콜

오류 메세지를 전송받는 데 주로 쓰입니다.

위키 정의를 좀 더 들여다 볼까요?

_ICMP 메세지들은 일반적으로 IP 동작에서 진단이나 제어로 사용되거나 오류에 대한 응답으로 만들어진다.ICMP 오류들은 원래 패킷의 소스 IP 주소로 보내지게 된다._

- _wikipedia_

**ICMP의 용도는 뭘까요?**

- 인터넷/통신 상에서 발생한 일반적인 상황에 대한 보고(report)
- 인터넷/통신 상에서 발생한 오류에 대한 보고
- 위험한 상황에 대한 경보

**ICMP의 기능을 정리해볼까요?**

- IP 프로토콜을 이용하여 ICMP 메세지 전달
- 네트워크 계층에 속하여 네트워크 관리 프로토콜의 역할 수행

(여기서 포인트는 종단간 데이터 수송 역할 X)
