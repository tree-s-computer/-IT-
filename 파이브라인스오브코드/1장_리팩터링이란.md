# 1장. 리팩터링 리팩터링하기

- 리팩터링 구성요소 이해
- 일상 업무에 리팩터링 도입
- 리팩터링에 있어 안전의 중요성
- 1부의 핵심 예제 소개

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/5a26ec9a-4a75-431e-ae2d-b908cda9c589/202c6359-1e9d-43b6-a035-030d083523cf/Untitled.png)

**스킬**: 어떤 코드가 잘못됐으며 리팩터링이 필요한지 파악하는 스킬. 주니어 개발자들은 코드 스멜을 스킬이라기 보다는 육감 같은 것으로 이해한다.

**문화**: 리팩터링 시간에 들이는 것을 권장하는 문화

**도구**: 우리가 하는 작업이 안전하다는 것을 보장할 무언가

## 1-1. 리팩터링이란 무엇인가 ?

가장 단순한 형태의 리팩터링은 **기능을 변경하지 않고 코드를 변경**하는 것.

```jsx
//변경전
return pow(base, exp / 2) * pow(base, exp / 2);

//변경후
let result = pow(base, exp / 2);
return result * result;
```

**리팩터링을 해야 하는 이유**

- 코드를 더 빠르게 만들기 위해
- 더 작은 코드를 만들기 위해
- 코드를 더 일반적이거나 재사용 가능하기 위해
- 코드의 가독성을 높이고 유지보수를 용이하기 위해

**좋은 코드(Good code)**
사람이 읽기 쉽고
유지보수가 용이하며
의도한 대로 잘 동작하는 코드

## 1.2 스킬: 무엇을 리팩터링 할 것인가?

### 1.2.1 코드 스멜의 예

함수는 **한 가지 작업을 수행해야 한다.** 이것은 아주 훌륭한 지침이지만 **한 가지**가 무엇인지 알기 쉽지 않다.

```jsx
//변경전
return pow(base, exp / 2) * pow(base, exp / 2);

//변경후
let result = pow(base, exp / 2);
return result * result;
```

이전의 코드를 다시 보자. 나누고, 거듭 제곱한 다음, 곱하기를 한다.

- 이것은 세 가지 일을 한다는 의미일까?
- 그렇지 않으면 1개의 숫자만 반환하고 상태가 변하지 않기 떄문에 한 가지 작업만 수행하는 것일까?

### 1.2.2 규칙의 예

모든 상황에서 좋은 코드를 보장할 수 없으며 어떤 경우에는 규칙을 따르는 것이 잘못될 수도 있다. 리팩터링을 배울 때는 절대 용어로 된 이름을 익히는 데만 집중한다. 이름이 내면화 되면 예외를 학습할 수 있다.

### 1.2.2 문화: 리팩터링은 언제 할까?

프로그래밍 작업으로 문제를 해결할 때 사용하는 6단계 작업 절차를 권장합니다.

1. 탐색: 무엇을 만들지 탐색
2. 명세화:
3. 구현
4. 테스트 : 2단계 명세를 따르는지 확인
5. 리팩터링
6. 전달 : pull request, push

### 1.3.1 레거시 시스템에서의 리팩터링

**“_우선_ _변경하기_ _쉽게_ _만든_ 후 _변경하라_. ”**

새로운 것을 구현할 때마다 새 코드를 쉽게 추가할 수 있게 리팩터링을 먼저 한다.

### 1.3.2 언제 리팩터링을 하지 말아야 할까?

- 한 번 실행하고 삭제할 코드
- 폐기되기전 유지보수 모드에있는 코드
- 임베디드 시스템이나 게임의 고급 물리엔진과 같이 엄격한 성능 요구사항이 있는 코드

## 1.4 도구: 안전한 리팩터링 방법

자동화된 테스트를 수행하면 안심하고 빠르게 진행할 수 있다. 그리고 다음과 같은 도구에 의존한다.

- 레시피처럼 상세하고 단계별로 구조화된 리팩터링 패턴
- 버전 관리
- 컴파일러

## 1.6 핵심 예제: 2D 퍼즐 게임

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/5a26ec9a-4a75-431e-ae2d-b908cda9c589/833f47f2-0278-4d71-9dd9-548f19c8997d/Untitled.png)

이고전 게임인 ‘2D 블록 밀기 퍼즐 게임’ 이라는 예제를 중심으로 구성되어 있다.
