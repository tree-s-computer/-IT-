# 학습 목표

- 스와핑이 뭔지 이해한다.
- 연속 메모리 할당 기법과 외부 단편화 문제를 이해한다.
- 가상 메모리 관리 기법인 페이징의 개념과 작동을 이해한다.
- 요구 페이징의 개념과 페이지 교체 알고리즘을 이해한다.
- 스레싱과 그를 해결하기 위한 프레임 할당에 대해 이해한다.

# 스와핑

메모리에 적재된 프로세스들 중에는 현재 실행되지 않는 프로세스가 있을 수 있다.
이러한 프로세스들을 임시로 보조기억장치 일부 영역으로 쫓아내고,
그렇게 해서 생긴 메모리상의 빈 공간에 또 다른 프로세스를 적재하여 실행하는 방식을 스와핑이라고 한다.

이때 프로세스들이 쫓겨나는 보조기억장치의 일부 영역을 스왑 영역 이라고 한다.
스왑 영역에 있던 프로세스가 메모리에서 스왑영역으로 옮겨지는 것을 스왑 아웃,
반대로 프로세스가 다시 메모리로 옮겨오는 것을 스왑 인 이라고 한다.

스와핑을 이용하면 프로세스들이 요구하는 메모리 주소 공간의 크기가 실제 메모리 크기보다 큰 경우에도 프로세스들을 동시 실행할 수 있다.

# 외부 단편화

프로세스를 할당하기 어려울 만큼 작은 메모리 공간들로 인해 메모리가 낭비되는 현상

# 가상메모리

실행하고자 하는 프로그램을 일부만 메모리에 적재하여 실제 물리 메모리 크기보다 더 큰 프로세스를 실행할 수 있게 하는 기술이다.
페이징 기법을 이용하면 물리 메모리보다 큰 프로세스를 실행할 수 있을 뿐만 아니라 앞선 절에서 배운 외부 단편화 문제도 해결할 수 있다.

# 페이징이란

연속 메모리 할당 방식에서 외부 단편화가 생기 근본적 이유는 각기 다른 크기의 프로세스가 메모리에 연속적으로 할당되었기 때문이다.
만일 메모리와 프로세스를 일정한 단위로 자르고 이를 메모리에 불연속적으로 할당할 수만 있다면 외부 단편화는 발생하지 않는다.

논리 주소 공간을 페이지라는 일정한 단위로 자르고,
메모리 물리 주소 공간을 프레임이라는 페이지와 동일한 크기의 일정한 단위로 자른뒤,
페이지를 프레임에 할당하는 가상 메모리 관리 기법이다.

이는 다르게 말하면 한 프로세스를 실행하기 위해 프로세스 전체가 메모리에 적재될 필요가 없다는 말과도 같다.
프로세스를 이루는 페이지 중 실행에 필요한 일부 페이지만을 메모리에 적재하고, 당장 실행에 필요하지 않은 페이지들은 **보조기억 장치**에 남겨둘 수 있다.

페이징 시스템은 프로세스가 비록 물리주소에 불연속적으로 배치되더라도 논리 주소에는 연속적으로 배치되도록 페이지 테이블을 이용한다.
프로세스마다 각자의 프로세스 테이블을 가지고 있고 각 프로세스의 페이지 테이블들은 메모리에 적재되어 있다.
그리고 CPU내의 페이지 테이블 베이스 레지스터(PTBR)는 각 프로세스의 페이지 테이블이 적재된 주소를 가리키고 있다.

CPU 곁에 TLB 라는 페이지 테이블의 캐시 메모리를 둔다.
이는 페이지 테이블의 일부 내용을 저장한다.

페이징 시스템에서 모든 논리 주소가 기본적으로 페이지 번호와 변위로 이루어져 있다.

# 계층형 페이징

프로세스를 이루는 모든 페이지 테이블 엔트리를 항상 메모리에 유지하지 않을 수 있는 방법
페이징 테이블을 페이징하여 여러 단계의 페이지를 둔다.

CPU가 발생하는 논리 주소도 달라진다.
바깥 페이지 번호 | 안쪽 페이지 번호 | 변위

**바깥 페이지 번호** : CPU와 근접한 곳에 위치한 페이지 테이블 엔트리
**안쪽 페이지 번호** : 첫 번째 페이지 테이블 바깥에 위치한 두 번째 페이지 테이블, 즉 페이지 테이블의 페이지 번호를 가리킨다.

# 요구 페이징

모든 페이지를 적재하지 않고 필요한 페이지만을 메모리에 적재하는 기법
이름 그대로 실행에 요구되는 페이지만 적재하는 기법이다.

# 스래싱

프로세스가 실제 실행되는 시간보다 페이징에 더 많은 시간을 소요하여 성능이 저해되는 문제
(CPU이용률이 낮아지는 문제)

# 동적 할당 방식

실행을 보고 할당할 프레임 수를 결정한다.
프로세스를 실행하는 과정에서 배분할 프레임을 결정하는 방식에는 크게 '작업 집합 모델'과 '페이지 폴트 빈도'를 사용하는 방식이 있다.

# 작업 집합

실행 중인 프로세스가 일정 시간 동안 참조한 페이지의 집합

#
